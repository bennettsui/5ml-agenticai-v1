# ===========================================================================
# AWS EC2 Environment Configuration
# ===========================================================================
# Usage:
#   Option A (Docker Compose): cp .env.aws .env && docker compose up -d
#   Option B (Systemd):        source .env.aws in your service file
#
# Recommended AWS services:
#   - RDS PostgreSQL (with pgvector extension)
#   - ElastiCache Redis (or self-hosted on EC2)
#   - S3 or Cloudflare R2 for object storage
#   - ALB or Nginx reverse proxy with ACM/Let's Encrypt SSL
# ===========================================================================

# Database (AWS RDS PostgreSQL)
# Create RDS instance with PostgreSQL 16, enable pgvector extension:
#   CREATE EXTENSION IF NOT EXISTS vector;
DATABASE_URL=postgresql+asyncpg://crm_kb_user:CHANGE_ME@your-rds-instance.region.rds.amazonaws.com:5432/client_crm_kb

# Redis (AWS ElastiCache Redis or self-hosted)
# ElastiCache: use the primary endpoint
# Self-hosted on same EC2: redis://127.0.0.1:6379
REDIS_URL=redis://your-elasticache-endpoint.region.cache.amazonaws.com:6379

# Object Storage (Cloudflare R2 or AWS S3)
# For S3: use https://s3.region.amazonaws.com
R2_ENDPOINT=https://your-account-id.r2.cloudflarestorage.com
R2_ACCESS_KEY=your-access-key
R2_SECRET_KEY=your-secret-key
R2_BUCKET_DOCUMENTS=client-documents
R2_BUCKET_TASTE=taste-examples

# Auth
JWT_SECRET=CHANGE_ME_USE_openssl_rand_base64_32
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=8

# AI
ANTHROPIC_API_KEY=sk-ant-your-key-here

# App URLs
# Replace with your domain (Route 53 / ALB) or EC2 public IP
# If using Docker Compose on a single EC2, both can be the same domain
# with Nginx routing /api/* to the API container and /* to the web container
API_BASE_URL=https://crm.yourdomain.com
WEB_BASE_URL=https://crm.yourdomain.com
NEXT_PUBLIC_API_URL=http://api:8000

# Gmail integration (Google OAuth2)
# Project: gmail-api-integration-486805
# IMPORTANT: Add this redirect URI in Google Cloud Console → Credentials → OAuth 2.0 Client
GOOGLE_CLIENT_ID=916941477967-38ouiore59dp5jbqfpfekoonfn2p624q.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_REDIRECT_URI=https://crm.yourdomain.com/api/gmail/callback

# AI Orchestration
AI_DAILY_TOKEN_LIMIT=1000000
AI_DAILY_COST_LIMIT_USD=50.0
AI_MAX_TOKENS_PER_CALL=16384
AI_LOOP_DETECTION_THRESHOLD=5
AI_LOOP_DETECTION_WINDOW_SECONDS=60
AI_BUDGET_WARNING_THRESHOLD=0.8
AI_MODEL_DEFAULT=claude-sonnet-4-20250514
AI_MODEL_FALLBACK=claude-haiku-4-5-20251001
